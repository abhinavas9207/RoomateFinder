{% extends 'base_user.html' %}
{% block content %}

<style>
    body {
        background: linear-gradient(135deg, #dce9ff, #b3ccff);
        font-family: "Poppins", sans-serif;
        min-height: 100vh;
    }

    .page-title {
        font-weight: 700;
        color: #0d47a1;
        margin-bottom: 25px;
        text-align: center;
        letter-spacing: 0.5px;
    }

    .roommate-card {
        background: #ffffff;
        border-radius: 16px;
        padding: 20px;
        border: 1px solid #e0eaff;
        box-shadow: 0 6px 18px rgba(0, 0, 0, 0.1);
        transition: 0.25s ease-in-out;
    }

    .roommate-card:hover {
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        border-color: #bccfff;
    }

    .roommate-card h5 {
        font-weight: 700;
        color: #0d47a1;
    }

    .roommate-info p {
        margin: 5px 0;
        font-weight: 500;
        color: #1a237e;
    }

    .chat-btn {
        display: inline-block;
        margin-top: 12px;
        padding: 8px 14px;
        background: #2563eb;
        color: #fff;
        border-radius: 8px;
        text-decoration: none;
        font-weight: 600;
        transition: background 0.2s ease;
    }

    .chat-btn:hover {
        background: #1e40af;
        color: #fff;
    }

    .bg-shape {
        position: absolute;
        border-radius: 50%;
        filter: blur(70px);
        z-index: -1;
    }

    .shape-blue {
        width: 250px;
        height: 250px;
        background: #4d79ff;
        top: 50px;
        left: 40px;
        opacity: 0.3;
    }

    .shape-light {
        width: 300px;
        height: 300px;
        background: #a6c8ff;
        bottom: 80px;
        right: 60px;
        opacity: 0.3;
    }
</style>

<!-- Decorative Background Shapes -->
<div class="bg-shape shape-blue"></div>
<div class="bg-shape shape-light"></div>

<h3 class="page-title">Suggested Roommates</h3>

<div class="container">
    <div class="row">
        {% for pref in roommates %}
            <div class="col-md-4 mb-4">
                <div class="roommate-card">
                    <h5>{{ pref.user.name }}</h5>

                    <div class="roommate-info">
    <p><strong>ğŸ“ Location:</strong> {{ pref.preferred_location }}</p>

    <p><strong>ğŸ’° Budget:</strong>
        â‚¹{{ pref.budget_min }} - â‚¹{{ pref.budget_max }}
    </p>

    <p><strong>ğŸ§¼ Cleanliness:</strong>
        {{ pref.get_cleanliness_display }}
    </p>

    <p><strong>ğŸš» Gender Preference:</strong>
        {{ pref.get_gender_preference_display }}
    </p>

    <p><strong>ğŸ¯ Hobbies:</strong>
        {% if pref.hobbies %}
            {{ pref.hobbies }}
        {% else %}
            Not specified
        {% endif %}
    </p>

    <p><strong>ğŸš¬ Smoking:</strong>
        {% if pref.smoking %} Yes {% else %} No {% endif %}
    </p>

    <p><strong>ğŸº Drinking:</strong>
        {% if pref.drinking %} Yes {% else %} No {% endif %}
    </p>

    <p><strong>ğŸ¾ Pets:</strong>
        {% if pref.pets %} Yes {% else %} No {% endif %}
    </p>

    {% if pref.lifestyle_notes %}
        <p><strong>ğŸ“ Lifestyle Notes:</strong>
            {{ pref.lifestyle_notes }}
        </p>
    {% endif %}
</div>


                    {# âœ… CHAT BUTTON â€“ FIXED #}
                    {% if pref.user.user.id != request.user.id %}
                        <a href="{% url 'start_user_chat' pref.user.user.id %}"
                           class="chat-btn">
                           ğŸ’¬ Chat
                        </a>
                    {% endif %}
                </div>
            </div>
        {% empty %}
            <p class="text-center mt-4" style="font-weight:600; color:#0d47a1;">
                No compatible roommates found based on your preferences.
            </p>
        {% endfor %}
    </div>
</div>

{% endblock %}
